# 奖励与激励机制

BitSota 同时使用多套奖励系统并相互配合。理解它们如何协同，有助于你最大化收益并有效参与。

## 奖励系统概览

**1  Bittensor 网络 Emissions**
由 Bittensor 协议依据验证者设置的权重分配的 ALPHA emissions。

**2  SOTA 权重分配**
验证者设置链上权重引导 emissions：90% 到 burn 地址，10% 到当前 SOTA winner。

**3  矿池声誉系统**
对矿池矿工而言，声誉会在 epoch 边界换算为 RAO 奖励。

每套系统有不同目标，会奖励不同的行为。

## Bittensor 网络 Emissions

这是子网经济的基础。Bittensor 区块链会自动分配 TAO 或 ALPHA，主要取决于：

**对矿工：**
- 验证者设置反映你表现的权重
- 权重越高，你获得的子网 emissions 份额越大
- emissions 会随区块持续发生
- 无需手动领取，代币会直接进入你的账户

**对验证者：**
- 验证者基于自身质押规模获得收益
- 子网表现会影响验证者收益
- 更好的子网意味着更多关注与更高 emissions

**Emissions 计划：**
Bittensor 具有固定 emissions 计划。每个子网会依据子网表现获得一部分。你获得的份额取决于你的权重相对其他参与者的比例。

**权重设置：**
验证者运行权重管理器，在 SOTA 事件最终确定后设置链上权重，从而决定 emissions 如何流向矿工。

## SOTA 权重分配

验证者通过链上权重设置与 Yuma 共识把 emissions 导向 SOTA winners。可用两种模式：

### Relay 共识模式  `winner_source: "relay"`

当矿工提交的算法超过 SOTA：
1. 验证者独立验证算法
2. 每个验证者在 relay 上投票接受新的 SOTA 候选
3. relay 跟踪投票并达成共识
4. 当足够多验证者一致时，relay 最终确定 SOTA 事件
5. SOTA 事件包含：miner_hotkey、score、start_block、end_block

权重设置流程：
1. 验证者从 relay 拉取最终确定的 SOTA 事件
2. 权重管理器识别当前 SOTA winner  最新事件
3. 验证者设置链上权重：90% burn_hotkey，10% winner_hotkey
4. 网络 emissions 按这些权重流动
5. 仅当新的 SOTA 事件最终确定时权重才会更新

该模式确保所有验证者在设置权重前对 winner 收敛一致。

### 本地模式  `winner_source: "local"`

当矿工提交的算法超过 SOTA：
1. 验证者独立验证算法
2. 若分数超过当前本地最优，验证者更新本地 winner
3. 验证者立即设置链上权重：90% burn，10% 本地 winner
4. 可选：仍向 relay 投票以便协调
5. 每当验证者找到更优本地候选时权重都会更新

权重设置流程：
1. 权重管理器跟踪该验证者已验证的最佳分数
2. 一旦出现新的最佳结果，权重立即更新
3. 不等待 relay 共识
4. 响应更快，但验证者可能选择不同 winners
5. `min_winner_improvement` 可防止频繁变更权重

该模式更快，但验证者对 winner 的选择可能暂时不一致。

**要点  两种模式通用：**
- 奖励通过网络 emissions 持续流动
- 90% emissions 进入 burn  通缩机制
- 10% emissions 分配给当前 SOTA winner
- winner 会在新的 SOTA 被接受后变化  relay 或本地
- 无需手动领取，emissions 自动到账

### SOTA 阈值

SOTA 指被接受的最低分数要求。随着更强算法被发现，阈值会逐步提高。

**当前 SOTA：** 可用 `curl https://relay.bitsota.com/sota_threshold` 查看。

**逐步提升：**
当有人以 0.92 超过 SOTA，新的 SOTA 就变为 0.92。下一次提交必须超过 0.92，从而保证持续改进。

**分数验证：**
验证者不会信任矿工自报分数。它们会重跑算法并用自己的分数投票，从而防止作弊。

**黑名单：**
如果你声称的分数与验证者分数差异超过 10%，验证者会投票将你加入黑名单。黑名单投票达到一定数量后，relay 会拒绝你的提交。

### 经济学影响

**对矿工：**
发现打破 SOTA 的算法会让你成为当前 winner，在有人超过你之前持续获得 10% 的网络 emissions。你的算法保持 SOTA 的时间越久，你获得的奖励越多。

**对验证者：**
验证者基于质押获得收益。它们通过设置权重把 emissions 分配给矿工：
- 90% burn 降低流通供给
- 10% 给 winner 奖励创新
- 健康的子网会吸引更多质押与参与者

## 矿池挖矿奖励

矿池矿工通过声誉系统获得奖励，声誉会在 epoch 边界换算为 RAO。

### 声誉累计

**评估任务：**
- 基础：每个准确评估 1.0 声誉
- 准确指在中位数共识的 10% 容差内
- 示例：准确评估 10 个算法 = 10.0 声誉

**演化任务：**
- 基础：2.0 声誉点
- 若共识分数大于等于 0.7，则按分数倍增
- 示例：共识分数 0.85，则 2.0 × 0.85 = 1.7 声誉
- 示例：共识分数 0.65，则 0 声誉 低于阈值

### Epoch 换算

epoch 结束时  通常每小时一次：

**总预算：** 例如 1,000,000,000 RAO

**分配公式：**
```
Your RAO = (Your Reputation / Total Pool Reputation) × Epoch Budget × (1 - Pool Fee)
```

**示例：**
- epoch 预算：1,000,000,000 RAO
- pool 总声誉：5,000 点
- 你的声誉：50 点
- pool 费用：5%

```
Your RAO = (50 / 5000) × 1,000,000,000 × 0.95
         = 0.01 × 1,000,000,000 × 0.95
         = 9,500,000 RAO
```

### 单矿工上限

矿池通常将个人奖励上限设为 epoch 预算的 5%，以确保分配公平。如果你的声誉按比例会超过 5%，超出部分会重新分配给其他矿工。

## TAO 与 ALPHA

Bittensor 近期引入 Dynamic TAO，并带来了子网专属的 ALPHA 代币。

**TAO：**
- Bittensor 主代币
- 用于注册费用
- 验证者质押
- 网络治理

**ALPHA：**
- 子网专属代币 每个子网有自己的 ALPHA
- 子网 94 的 ALPHA 表示该子网创造的价值
- 可用于子网内质押
- 可通过流动性池与 TAO 互换

**过渡期：**
Bittensor 正从 TAO 单一奖励过渡到 ALPHA 权重奖励，周期约 100 天。最终子网奖励将主要以 ALPHA 计。

**这意味着什么：**
你的奖励  emissions 与 Capacitor  都以 ALPHA stake 的形式体现。ALPHA stake 可：
- 用于验证者注册
- 在交易所换成 TAO
- 用于子网生态内活动

## 奖励计算示例

### 示例 1：直接矿工

**设定：**
- 你发现了打破 SOTA 的算法
- 验证者投票且 relay 最终确定你的 SOTA 事件
- 你成为当前 winner 并获得 10% 权重
- 子网每日 emissions 为 1000 ALPHA
- 你保持 SOTA winner 7 天

### 示例 2：矿池矿工

**设定：**
- 你 24 小时持续矿池挖矿
- 每小时完成约 20 个评估任务
- 每小时完成约 2 个演化任务
- 评估准确率 90%
- 平均演化共识分数 0.75

**每小时声誉：**
- 评估：20 × 0.9  accuracy × 1.0 = 18 声誉
- 演化：2 × 2.0 × 0.75 = 3 声誉
- 合计：21 声誉 每小时

**每小时收益  假设 pool 总声誉 5000：**
```
RAO = (21 / 5000) × 1,000,000,000 × 0.95
    = 3,990,000 RAO
```

**每日收益：**
- 24 × 3,990,000 = 95,760,000 RAO ≈ 0.096 ALPHA

### 示例 3：验证者

**设定：**
- 你质押 1000 ALPHA 作为验证者
- 子网验证者总质押 10,000 ALPHA
- 子网 emissions 为每日 1000 ALPHA

**每日收益：**
```
Your share = (1000 / 10000) × 1000 = 100 ALPHA/day
```

## 最大化收益

### 对直接矿工

**优化演化：**
- 使用 archive 引擎以获得更好的探索
- 增加代数 例如 150 以上
- 聚焦验证者使用的 CIFAR-10 二分类基准
- 开跑前查看当前 SOTA 阈值

**硬件：**
更强 CPU 意味着每分钟更多代数与评估，从而提高找到打破 SOTA 的概率。

**时机：**
当 SOTA 阈值较低时提交更有利，例如子网早期，或一段时间没有更新 SOTA 后。

### 对矿池矿工

**保持高准确率：**
一次错误评估影响不大，但持续不准确会让收益降低 10% 到 20%。

**平衡任务类型：**
- 评估任务：更快累计声誉
- 演化任务：若分数高，每任务收益更高

**持续运行：**
矿池挖矿奖励稳定性，24 小时运行会最大化声誉累计。

**选择合适矿池：**
观察矿池人数。过度拥挤会降低份额。可考虑切换矿池或升级硬件转向直接挖矿。

### 对验证者

**设置准确权重：**
WeightManager 会自动处理，但持续监控矿工质量有助于提升子网声誉，从而提高你的 emissions。
